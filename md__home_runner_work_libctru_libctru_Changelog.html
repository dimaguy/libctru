<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libctru: Changelog</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libctru
   &#160;<span id="projectnumber">v2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Changelog </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md5"></a>
Version 2.1.1</h1>
<ul>
<li>FPSCR is now initialized with a predictable value in all threads (including the main thread).</li>
<li>Added gspGetSessionHandle and gspLcdGetSessionHandle.</li>
<li>Fixed bugs related to uninitialized data in srv/errf service wrappers.</li>
<li>Further improvements to overall system stability and other minor adjustments have been made to enhance the user experience.</li>
</ul>
<h1><a class="anchor" id="autotoc_md6"></a>
Version 2.1.0</h1>
<p><b>The #define for the 3DS platform has been changed to <code>__3DS__</code> (previously it was <code>_3DS</code>) - please update your Makefiles and your code</b></p>
<h2><a class="anchor" id="autotoc_md7"></a>
graphics</h2>
<ul>
<li>Refactored VRAM allocators:<ul>
<li>Added proper handling for VRAM banks (A and B, 3 MiB each)</li>
<li>Allocations no longer cross VRAM bank boundaries</li>
<li>Added vramAllocAt, vramMemAlignAt</li>
</ul>
</li>
<li>Add gspIsPresentPending.</li>
<li>Add return value to gspPresentBuffer.</li>
<li>libctru console now supports SGR 38 and 48 escape sequences (needed by fmtlib).</li>
<li>Fixed GPU_TEXFACE enum.</li>
</ul>
<h2><a class="anchor" id="autotoc_md8"></a>
filesystem</h2>
<ul>
<li>Changed rename to replace existing files, for better compatibility with POSIX (#483)</li>
<li>Added SDMMC speed info types, and more clock rates (#480).</li>
</ul>
<h2><a class="anchor" id="autotoc_md9"></a>
miscellaneous</h2>
<ul>
<li>Added support for 3dslink stdio redirection (#488).</li>
<li>Added ptm:gets, ptm:sets and more ptm service commands.</li>
<li>Added <a class="el" href="structAM__ContentInfo.html" title="Contains information about a title&#39;s content.">AM_ContentInfo</a>, AM_ContentInfoFlags structs.</li>
<li>Added AMAPP_GetDLCContentInfoCount, AMAPP_ListDLCContentInfos.</li>
<li>Fixed bug in Huffman decoder.</li>
<li>Further improvements to overall system stability and other minor adjustments have been made to enhance the user experience.</li>
</ul>
<h1><a class="anchor" id="autotoc_md10"></a>
Version 2.0.1</h1>
<ul>
<li>Added CFG_SystemModel enum.</li>
<li>Fixed bug in condvar code.</li>
<li>Fixed bug in srvpm code.</li>
<li>Fixed const correctness issues in gspgpu code.</li>
<li>Further improvements to overall system stability and other minor adjustments have been made to enhance the user experience.</li>
</ul>
<h1><a class="anchor" id="autotoc_md11"></a>
Version 2.0.0</h1>
<p><b>This is a major release. Many essential components have been overhauled, although breaking changes are minimal and only affect rarely used functionality.</b></p>
<h2><a class="anchor" id="autotoc_md12"></a>
system</h2>
<ul>
<li>Added support for userAppInit/userAppExit (backported from libnx).</li>
<li>Changed default heap allocation logic to be more robust:<ul>
<li>Resource limit SVCs are now used to detect available memory.</li>
<li>The heap size calculation algorithm was tweaked so that 32MB of linear heap are available for normal apps running under the default appmemtype layout on Old 3DS, as it was the case prior to libctru 1.8.0.</li>
</ul>
</li>
<li>SVC enhancements:<ul>
<li>Added svcControlPerformanceCounter with corresponding enums.</li>
<li>Overhauled support for DMA related SVCs:<ul>
<li>Added svcRestartDma.</li>
<li>Added enums and structures needed for DMA SVCs.</li>
<li>Added dmaDeviceConfigInitDefault, dmaConfigInitDefault.</li>
</ul>
</li>
<li>Added svcArbitrateAddressNoTimeout (minor ABI optimization for the svcArbitrateAddress syscall when the timeout parameter is not used).</li>
<li>Changed process memory SVCs to use u32 parameters instead of void* for foreign-process addresses.</li>
</ul>
</li>
<li>Major refactor of OS related functions:<ul>
<li>Added defines for Arm11 userland memory region addresses/sizes.</li>
<li>Added struct definitions for the kernel/system shared config pages: <a class="el" href="structosKernelConfig__s.html" title="Kernel configuration page (read-only).">osKernelConfig_s</a>, <a class="el" href="structosSharedConfig__s.html" title="Shared system configuration page structure (read-only or read-write depending on exheader).">osSharedConfig_s</a>.</li>
<li>Added macros to access the kernel/system shared config pages: OS_KernelConfig, OS_SharedConfig.</li>
<li>Fixed return type of osGetMemRegionUsed, osGetMemRegionFree (s64 -&gt; u32).</li>
<li>Refactored osConvertVirtToPhys and added support for the missing linearly mapped memory regions.</li>
<li>Rewritten RTC time reading support to improve accuracy and match official logic more closely.<ul>
<li>Time drift correction is now implemented.</li>
<li>Added osGetTimeRef function for reading the current reference timepoint published by the PTM sysmodule.</li>
</ul>
</li>
<li>Fixed osStrError to actually work properly.</li>
<li>Cleaned up osGetSystemVersionData implementation.</li>
<li>Other miscellaneous internal cleanup.</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md13"></a>
synchronization</h2>
<ul>
<li>Improved safety of usermode synchronization primitives when used in intercore contexts.</li>
<li>Added CondVar synchronization primitive implementation.</li>
<li>Added syncArbitrateAddress, syncArbitrateAddressWithTimeout.<ul>
<li>These functions replace __sync_get_arbiter (which has been removed).</li>
</ul>
</li>
<li>Added __dmb (Data Memory Barrier) intrinsic.</li>
<li>Added LightEvent_WaitTimeout.</li>
<li>Added LightSemaphore_TryAcquire.</li>
<li>Changed LightLock to support 0 as a valid initial (unlocked) state.<ul>
<li>This effectively adds support for trivially initialized/zerofilled locks.</li>
</ul>
</li>
<li>Fixed bug in LightSemaphore_Acquire.</li>
</ul>
<h2><a class="anchor" id="autotoc_md14"></a>
graphics</h2>
<ul>
<li>Major refactor of the GSP service wrapper. It should now be possible to use GSP directly without the gfx API, if the user so desires.</li>
<li>Major internal refactor of the gfx wrapper API that increases maintainability.</li>
<li>Added support for 800px wide mode with non-square pixels on the top screen - usable on every 3DS model except for Old 2DS (but <em>including</em> New 2DS XL).</li>
<li>Added support for 800px wide mode to the libctru console.</li>
<li>Transferred most of the GSP initialization duties to gspInit/gspExit (previously done by the gfx wrapper).</li>
<li>Added defines for screen IDs and screen dimensions.</li>
<li>Added gspPresentBuffer for pushing a framebuffer to the internal GSP swap queue (previously this was an internal function in the gfx wrapper).</li>
<li>Added gspGetBytesPerPixel, gspHasGpuRight.</li>
<li>Added gfxScreenSwapBuffers, with support for duplicating left-&gt;right eye content during stereoscopic 3D mode.</li>
<li>Fixed LCD configuration mode when using framebuffers on VRAM with the gfx wrapper.</li>
<li>Changed gfxExit to set LCD force-black status to true.</li>
<li>Changed the gfx wrapper to always use gspPresentBuffer during swap. This means the immediate parameter of gfxConfigScreen no longer has any effect, and gfxSwapBuffers/gfxSwapBuffersGpu now do the same thing - that is, present the rendered content during the next VBlank.</li>
<li>Renamed GSPGPU_FramebufferFormats enum to GSPGPU_FramebufferFormat.</li>
<li>Deprecated gfxConfigScreen (use gfxScreenSwapBuffers instead).</li>
<li>Removed gspInitEventHandler, gspExitEventHandler (now handled automatically inside gspInit/gspExit).</li>
<li>Removed sharedGspCmdBuf param from gspSubmitGxCommand (now uses the proper GSP shared memory address automatically).</li>
<li>Removed GSPGPU_REBASE_REG define (leftover from early 3DS homebrew).</li>
<li>Removed numerous internal fields that were previously publicly accessible.</li>
</ul>
<h2><a class="anchor" id="autotoc_md15"></a>
audio</h2>
<ul>
<li>DSP access rights are now managed using a hook mechanism, similar to the APT hook.<ul>
<li>This fixes audio playback during libapplet invocations, as they no longer relinquish DSP rights.</li>
</ul>
</li>
<li>Changed NDSP to use the DSP hook instead of the APT hook.</li>
<li>Added dspIsComponentLoaded, dspHook, dspUnhook.</li>
<li>Fixed and improved robustness of wavebuf handling in NDSP code.</li>
<li>Fixed and refactored NDSP sleep/wakeup code to improve accuracy compared to official logic.</li>
</ul>
<h2><a class="anchor" id="autotoc_md16"></a>
filesystem</h2>
<ul>
<li>Reduced TLS footprint of the archive/romfs devices by sharing buffers.</li>
<li>Reduced the maximum number of concurrently registered archive devices from 32 to 8 in order to save memory.</li>
<li>Backported multi-mount romfs system from libnx, with additional optimizations (breaking API change).</li>
<li>Added romfsMountFromTitle.</li>
<li>Fixed stat for romfs device to return -1 for non-existent files/directories.</li>
</ul>
<h2><a class="anchor" id="autotoc_md17"></a>
applet</h2>
<ul>
<li>Major internal refactor of the APT service wrapper that should improve accuracy compared to official logic.</li>
<li>Fixed sleep handling when the app is inactive (i.e. app is suspended).</li>
<li>Added support for screen capture during libapplet transitions.</li>
<li>Added support for proper DSP access right management.</li>
<li>aptLaunchLibraryApplet no longer calls aptMainLoop internally. Library applet calls no longer return a bool value, users are advised to check APT state manually afterwards.</li>
<li>Added functions for checking APT state: aptIsActive, aptShouldClose, aptShouldJumpToHome, aptCheckHomePressRejected (replaces aptIsHomePressed).</li>
<li>Added functions for handling incoming requests: aptHandleSleep, aptHandleJumpToHome.</li>
<li>Added aptJumpToHomeMenu.</li>
<li>Changed aptMainLoop to use the new wrapper functions (this means aptMainLoop can now be replaced by custom logic if desired).</li>
<li>Changed APTHOOK_ONEXIT to be invoked during aptExit instead of during aptMainLoop.</li>
<li>Added aptClearChainloader, aptSetChainloaderToSelf.</li>
</ul>
<h2><a class="anchor" id="autotoc_md18"></a>
miscellaneous</h2>
<ul>
<li>Fix decompress out-of-bounds access.</li>
<li>Added NDM_ prefix to NDM enum members in order to avoid name collisions.</li>
<li>Corrected parameter type in several CFGU functions.</li>
<li>Corrected return value of GSPLCD_GetBrightness.</li>
<li>Removed obsolete support for ninjhax 1.x's fake hb:HB service.</li>
<li>Further improvements to overall system stability and other minor adjustments have been made to enhance the user experience.</li>
</ul>
<h1><a class="anchor" id="autotoc_md19"></a>
Version 1.9.0</h1>
<ul>
<li>hid: Added hidKeysDownRepeat, hidWaitForAnyEvent. Allow user override of irsst usage.</li>
<li>Add ptm rtc time commands</li>
<li>Add sleep state FSM handling service commands</li>
<li>Revamp mappableAlloc</li>
<li>Fixed stat on romfs for directories, implemented lstat via stat (FAT32 has no symlinks)</li>
<li>Further improvements to overall system stability and other minor adjustments have been made to enhance the user experience.</li>
</ul>
<h1><a class="anchor" id="autotoc_md20"></a>
Version 1.8.0</h1>
<ul>
<li>Added support for environments where the home menu is not launched (such as running under SAFE_FIRM)</li>
<li>Added FSPXI service wrappers</li>
<li>Changed heap allocation logic to be more flexible; this fixes support for certain system memory layouts</li>
<li>Cleaned up and optimized light lock locking code</li>
<li>Further improvements to overall system stability and other minor adjustments have been made to enhance the user experience.</li>
</ul>
<h1><a class="anchor" id="autotoc_md21"></a>
Version 1.7.0</h1>
<ul>
<li>fix FIONBIO ioctl</li>
<li>Fix CAMU_GetLatestVsyncTiming</li>
<li>Add archive STDIO device driver</li>
<li>Add AC commands that allow forcing a wifi connection</li>
<li>Fix <a class="el" href="dsp_8h.html#a2722008d6a077f5d444acf4b74a16ba4" title="Initializes the dsp service.">dspInit()</a> error handling in <a class="el" href="ndsp_8h.html#af291186c61a1899c748aac58662d7ba4" title="Initializes NDSP.">ndspInit()</a></li>
<li>Further improvements to overall system stability and other minor adjustments have been made to enhance the user experience.</li>
</ul>
<h1><a class="anchor" id="autotoc_md22"></a>
Version 1.6.0</h1>
<ul>
<li>Major overhaul to font loading code in order to support loading external fonts.</li>
<li>Major overhaul to PM service wrappers, now with separate support for pm:app and pm:dbg.</li>
<li>Added Rosalina GDB host IO (gdbhio) support.</li>
<li>Added support for the fs:REG service.</li>
<li>Added support for the PxiPM service.</li>
<li>Added PM launch flag definitions.</li>
<li>Added SO_BROADCAST.</li>
<li>Added new APT helper functions: aptIsHomeAllowed, aptSetHomeAllowed, aptIsHomePressed.</li>
<li>Added support for the Mii selector libapplet, and other improvements to Mii support.</li>
<li>Renamed IPC_Desc_CurProcessHandle to IPC_Desc_CurProcessId.</li>
<li>Changed signature of LOADER_RegisterProgram to use <a class="el" href="structFS__ProgramInfo.html" title="Program information.">FS_ProgramInfo</a> structs.</li>
<li>Fixed IPC bugs in the Loader service.</li>
<li>Fixed svcCreateResourceLimit.</li>
<li>Fixed corner case bug in GPUCMD_Add.</li>
<li>Fixed bugs in select and herror.</li>
<li>Further improvements to overall system stability and other minor adjustments have been made to enhance the user experience.</li>
</ul>
<h1><a class="anchor" id="autotoc_md23"></a>
Version 1.5.1</h1>
<ul>
<li>Added support for the FRD service.</li>
<li>Added gas-related GPU definitions.</li>
<li>Implemented nanosleep.</li>
<li>Further improvements to overall system stability and other minor adjustments have been made to enhance the user experience.</li>
</ul>
<h1><a class="anchor" id="autotoc_md24"></a>
Version 1.5.0</h1>
<ul>
<li>Added new decompression API which supports LZSS/LZ10, LZ11, RLE &amp; Huffman formats, and which can read compressed data from memory or from a file.</li>
<li>Added srvSetBlockingPolicy, which controls whether srvGetServiceHandle blocks when the service isn't yet registered (or returns an error otherwise).</li>
<li>Added ACU commands: ACU_GetStatus, ACU_GetSecurityMode, ACU_GetSSIDLength, ACU_GetSecurityMode, ACU_GetProxyEnable, ACU_GetProxyPort, ACU_GetProxyUserName, ACU_GetProxyPassword, ACU_GetLastErrorCode, ACU_GetLastDetailErrorCode.</li>
<li>Added CFGI commands: CFGI_SecureInfoGetSerialNumber, CFGU_IsNFCSupported, CFGI_GetLocalFriendCodeSeed, CFGI_GetLocalFriendCodeSeedData, CFGI_GetSecureInfoData, CFGI_GetSecureInfoSignature.</li>
<li>Added MCUHWC commands: MCUHWC_SetWifiLedState, MCUHWC_SetPowerLedState, MCUHWC_Get3dSliderLevel, MCUHWC_GetFwVerHigh, MCUHWC_GetFwVerLow.</li>
<li>Added NS commands: NS_TerminateTitle, NS_TerminateProcessTID (with timeout), NS_RebootSystem.</li>
<li>Added PM commands: PM_TerminateCurrentApplication, PM_TerminateProcess, PM_UnregisterProcess.</li>
<li>Overhauled NDMU service support and added many commands that were previously missing.</li>
<li>Fixed bugs in srv:pm implementation.</li>
<li>Fixed calculation of vertical texture coordinates in fontCalcGlyphPos.</li>
<li>Fixed shaderProgramSetGshInputPermutation.</li>
<li>Fixed and added clock speed constants (affects system clock and NDSP).</li>
<li>Further improvements to overall system stability and other minor adjustments have been made to enhance the user experience.</li>
</ul>
<h1><a class="anchor" id="autotoc_md25"></a>
Version 1.4.0</h1>
<ul>
<li>Added <a class="el" href="structLightSemaphore.html" title="A light semaphore.">LightSemaphore</a> synchronization primitive.</li>
<li>Added exheader definitions.</li>
<li>Added support for the Loader service.</li>
<li>Added support for the mcu::HWC service.</li>
<li>Added support for the Mii selector applet.</li>
<li>Added ResourceLimitType.</li>
<li>Added AM commands: AM_DeleteAllTemporaryTitles, AM_DeleteAllExpiredTitles, AM_DeleteAllTwlTitles.</li>
<li>Added CFGI commands: CFGI_RestoreLocalFriendCodeSeed, CFGI_RestoreSecureInfo, CFGI_DeleteConfigSavefile, CFGI_FormatConfig, CFGI_ClearParentalControls, CFGI_VerifySigLocalFriendCodeSeed, CFGI_VerifySigSecureInfo.</li>
<li>Added GSPGPU commands: GSPGPU_SetLedForceOff.</li>
<li>Added GSPLCD commands: GSPLCD_SetBrightness, GSPLCD_SetBrightnessRaw, GSPLCD_PowerOnAllBacklights, GSPLCD_PowerOffAllBacklights, GSPLCD_SetLedForceOff.</li>
<li>Fixed srv:pm handling in pre-7.x system versions.</li>
<li>Fixed GPU_LIGHTPERM macro definition.</li>
<li>Removed the remaining deprecated GPUCMD commands.</li>
<li>Further improvements to overall system stability and other minor adjustments have been made to enhance the user experience.</li>
</ul>
<h1><a class="anchor" id="autotoc_md26"></a>
Version 1.3.0</h1>
<ul>
<li>Implement more svc calls<ul>
<li>svcCreateResourceLimit</li>
<li>svcSetResourceLimitValues</li>
<li>svcSetProcessResourceLimits</li>
<li>svcCreateSession</li>
<li>svcCreateSessionToPort</li>
<li>svcSetGpuProt</li>
<li>svcSetWifiEnabled</li>
</ul>
</li>
<li>Additional functions<ul>
<li>implement httpcAddPostDataBinary</li>
<li>implement PTMU_GetAdapterState</li>
<li>implement GSPLCD_GetBrightness</li>
<li>add threadDetach</li>
</ul>
</li>
<li>srv fixes<ul>
<li>Fix srvPublishToSubscriber documentation</li>
<li>Fix handling of service/named port names of length 8</li>
<li>Fix srvRegisterPort</li>
</ul>
</li>
<li>debugging support<ul>
<li>Add support for user-specified exception handlers</li>
<li>Rename debugDevice_3DMOO to debugDevice_SVC</li>
<li>created debug version of library</li>
</ul>
</li>
<li>Implement error applet</li>
<li>GPU updates<ul>
<li>Add GX command queue system for batching GX commands</li>
<li>Correct GPU_PROCTEX_LUTID definition</li>
<li>Add GPU_FOGMODE, GPU_GASMODE and GPU_GASLUTINPUT</li>
</ul>
</li>
<li>Other improvements and minor adjustments for overall system stability to enhance the user experience</li>
</ul>
<h1><a class="anchor" id="autotoc_md27"></a>
Version 1.2.1</h1>
<ul>
<li>Added NFC support</li>
<li>Update and renamed <a class="el" href="structNFC__AmiiboConfig.html" title="AmiiboConfig structure, see also here: https://3dbrew.org/wiki/NFC:GetAmiiboConfig.">NFC_AmiiboConfig</a> members</li>
<li>Added <a class="el" href="structTickCounter.html" title="Tick counter.">TickCounter</a> for measuring performance</li>
<li>Added (linear/vram/mappable)GetSize for retrieving allocated buffer size</li>
<li>Added nim:s client implementation.</li>
<li>Correct bus clock used for time calulations</li>
<li>Default to file write without internal copy buffer</li>
<li>GPUCMD_Add: allow NULL for adding zerofilled parameter data</li>
<li>Clarify threadFree usage in documentation</li>
<li>Add GPU_TEXFACE enumeration</li>
</ul>
<h1><a class="anchor" id="autotoc_md28"></a>
Version 1.2.0</h1>
<ul>
<li>New features:<ul>
<li>Added support for the nfc:m/nfc:u service.</li>
<li>Added support for the ssl:C service.</li>
<li>Added support for the nwm::UDS service (Local wireless).</li>
<li>Added support for the boss:P/boss:U service (SpotPass).</li>
<li>Added support for using the err:f global port.</li>
<li>Added support for using and parsing the shared system font.</li>
<li>Added support for using the 3DS' built-in software keyboard applet.</li>
<li>Added support for using Light Events, a lightweight alternative to normal events that doesn't consume handles.</li>
<li>Added NDSP commands for setting up per-channel monopole &amp; biquad filters.</li>
</ul>
</li>
<li>Major breaking changes:<ul>
<li>Major revamp of the APT code; some old deprecated functions were completely removed, homebrew code abiding by recent standards shouldn't be affected though.</li>
<li>Major revamp of the HTTPC code, including both additions and bugfixes.</li>
<li>Major revamp of the AM code, with some enhancements.</li>
<li>Major revamp of FSUSER code, archive handle handling has been refactored. fs(End)UseSession replaced with fsExemptFromSession.</li>
<li>Major revamp of MVD code to support video processing.</li>
<li>Major revamp of the GPU shader code to fully support geometry shaders.</li>
<li>The old deprecated GPU wrapper commands have been removed. Use direct GPU register writes or a separate GPU wrapper library (such as citro3d) instead.</li>
<li>Major revamp and update of the SVC debugger API.</li>
<li>Heap size management has been simplified and made more flexible. All applications now default to 32MB of linear heap and all remaining APPLICATION memory is allocated as the application heap, regardless of entrypoint or application format.</li>
</ul>
</li>
<li>Miscellaneous additions:<ul>
<li>Several enhancements to SOC:u support:<ul>
<li>Added getaddrinfo, getnameinfo, gethostname, gai_strerror.</li>
<li>Added SOCU_ShutdownSockets, SOCU_CloseSockets, SOCU_GetIPInfo, SOCU_GetNetworkOpt, SOCU_AddGlobalSocket.</li>
<li>Added several missing flags.</li>
</ul>
</li>
<li>Minor am:net corrections and additions.</li>
<li>Added sdmcWriteSafe to disable copying data to temporary RW buffers before calling FSFILE_Write.</li>
<li>Added sdmc_getmtime to retrieve the modification time for a file.</li>
<li>Added opendir/readdir/rewinddir/closedir/stat support to romfs.</li>
<li>Added support for multiple RomFS mounts.</li>
<li>Added macros for console color codes (ANSI escape sequences).</li>
<li>Added support for specifying a fallback RomFS path for when argv isn't available.</li>
<li>Added aptIsSleepAllowed/aptSetSleepAllowed.</li>
<li>Added ResetType enum for use with svcCreateEvent and svcCreateTimer.</li>
<li>Added psInitHandle and psGetSessionHandle.</li>
<li>Added AM commands: AM_ExportTwlBackup, AM_ImportTwlBackup, AM_ReadTwlBackupInfo, AM_DeleteAllDemoLaunchInfos, AM_FinishCiaInstallWithoutCommit, AM_CommitImportPrograms.</li>
<li>Added AMPXI commands: AMPXI_WriteTWLSavedata, AMPXI_InstallTitlesFinish.</li>
<li>Added APT commands: APT_ReceiveDeliverArg.</li>
<li>Added CFG commands: CFG_GetConfigInfoBlk4, CFG_GetConfigInfoBlk8, CFG_SetConfigInfoBlk4, CFG_SetConfigInfoBlk8, CFG_UpdateConfigNANDSavegame.</li>
<li>Added GSPLCD commands: GSPLCD_GetVendors</li>
<li>Added FSUSER commands: FSUSER_UpdateSha256Context.</li>
<li>Added NEWS commands: NEWS_GetTotalNotifications, NEWS_SetNotificationHeader, NEWS_GetNotificationHeader, NEWS_GetNotificationMessage, NEWS_GetNotificationImage, NEWS_SetNotificationMessage, NEWS_SetNotificationImage.</li>
<li>Added NS commands: NS_TerminateProcessTID, NS_LaunchFIRM, NS_LaunchApplicationFIRM.</li>
<li>Added PS commands: PS_SignRsaSha256, PS_VerifyRsaSha256.</li>
<li>Added PTMSYSM commands: PTMSYSM_CheckNew3DS, PTMSYSM_ShutdownAsync, PTMSYSM_RebootAsync.</li>
<li>Added PXIDEV commands: PXIDEV_SPIMultiWriteRead, PXIDEV_SPIWriteRead.</li>
<li>Added system calls: svcCreateCodeSet, svcCreateProcess, svcGetResourceLimit, svcGetResourceLimitValues, svcGetResourceLimitCurrentValues, svcSetProcessAffinityMask, svcSetProcessIdealProcessor, svcRun, svcBindInterrupt, svcUnbindInterrupt, svcGetHandleInfo, svcBreakRO, svcGetThreadList.</li>
<li>Added result module codes.</li>
<li>Added GPU A4 texture format enum.</li>
</ul>
</li>
<li>Miscellaneous changes and bug fixes:<ul>
<li>Optimized sdmc's readdir to batch directory entries.</li>
<li>APT, GSPGPU and NDSP code was tuned to take advantage of Light Events.</li>
<li>Moved am:app init to a separate function.</li>
<li>Several issues concerning IPC static buffer saving/restoring were fixed.</li>
<li>Several issues concerning sdmc/RomFS devoptabs were fixed.</li>
<li>Several issues concerning SOC:u were fixed.</li>
<li>An issue concerning cam:u was fixed.</li>
<li>An issue concerning HID was fixed.</li>
<li>An issue concerning <a href="news:u">news:u</a> was fixed.</li>
<li>The GPU ETC1 texture format enums were fixed.</li>
<li>usleep was fixed.</li>
<li>Fixed incorrect bool return values from services.</li>
<li>Fixed buffer overflow after gfxSetScreenFormat.</li>
<li>Fixed home menu display of suspended 2D applications.</li>
<li>Fixed buffer overrun in console code.</li>
<li>Fixed PS_EncryptDecryptAes and PS_EncryptSignDecryptVerifyAesCcm.</li>
<li>Fixed the implementation of svcGetProcessList.</li>
<li>Corrected svcKernelSetState function signature.</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md29"></a>
Version 1.1.0</h1>
<ul>
<li>Additions:<ul>
<li>GSPGPU/GX code was revised and enhanced:<ul>
<li>Screens can be buffer-swapped independently using the new gfxConfigScreen function.</li>
<li>Added gspSetEventCallback for running event code directly on the GSP thread.</li>
<li>Added gspWaitForAnyEvent for waiting for any GSP event.</li>
<li>Added gfxIs3D for retrieving 3D-enable status.</li>
</ul>
</li>
<li>Added AM_InstallFirm.</li>
<li>Added __sync_get_arbiter.</li>
<li>Added support for usleep.</li>
</ul>
</li>
<li>Changes:<ul>
<li>NDSP thread priority has been increased, therefore mitigating potential sound issues due to high CPU usage on the main thread.</li>
<li>RomFS initialization no longer makes romfs:/ the default device.</li>
</ul>
</li>
<li>Bug fixes:<ul>
<li>Fixed the timeout parameter in svcArbitrateAddress.</li>
<li>Fixed svcSetTimer.</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md30"></a>
Version 1.0.0</h1>
<ul>
<li>New features:<ul>
<li>libctru documentation is now available at <a href="http://smealum.github.io/ctrulib/">http://smealum.github.io/ctrulib/</a></li>
<li>Added the NDSP API, which allows the use of the DSP (audio).</li>
<li>Added Inter Process Communication helpers.</li>
<li>Added Result code helpers.</li>
<li>Added support for lightweight synchronization primitives.</li>
<li>Added support for making the C/C++ standard libraries thread safe.</li>
<li>Added support for thread-local objects, with the use of standard C and C++ constructs (or GCC extensions).</li>
<li>Added a new threading API that properly manages internal state. Direct usage of svcCreateThread is deprecated.</li>
<li>Added a mappable address space allocator. Services which need to map shared memory blocks now use this allocator.</li>
<li>Added support for embedded RomFS, embedded SMDH and GPU shader building in the template Makefiles.</li>
</ul>
</li>
<li>Changes and additions to the GPU code:<ul>
<li>Stateless wrapper functions (GPU_*) that merely masked GPU register usage were deprecated, in favour of external GPU wrapper libraries such as citro3d. A future release of libctru may remove them.</li>
<li>The API set has therefore been simplified down to command list management.</li>
<li>Synchronized register names with the 3dbrew Wiki.</li>
<li>Added fragment lighting registers and enums.</li>
<li>Added procedural texture registers and enums.</li>
<li>Added shaderProgramSetGshInputPermutation, for configuring the wiring between the vertex shader and the geometry shader.</li>
<li>Added shaderProgramSetGshMode, for configuring the geometry shader operation mode.</li>
<li>Added shaderProgramConfigure, intended to be used by GPU wrapper libraries.</li>
<li>SHBIN/shaderProgram code now correctly computes and sets the values of the GPUREG_SH_OUTATTR_MODE/CLOCK registers.</li>
<li>GX function naming has been improved, and the initial GX command buffer parameter has been removed.</li>
</ul>
</li>
<li>Major changes and miscellaneous additions:<ul>
<li>Sweeping changes to make function/structure/enum naming more consistent across the whole library. This affects a lot of code.</li>
<li>Compiler/linker flags have been tweaked to increase performance and reduce code size, through the garbage collection of unused functions.</li>
<li>Service initialization is now reference counted in order to properly manage dependencies.</li>
<li>Initial service handle parameters have been removed, since they were nearly always set to NULL.</li>
<li>Completed coverage of srv and FSUSER service calls.</li>
<li>Added fsUseSession and fsEndUseSession for overriding the FSUSER session used in commands in the current thread.</li>
<li>Added osGet3DSliderState, osSetSpeedupEnable, osGetSystemVersionData and osGetSystemVersionDataString.</li>
<li>Refactored the MICU service.</li>
<li>NCCH versions of applications now detect the maximum amount of available memory on startup.</li>
</ul>
</li>
<li>Miscellaneous changes and bug fixes:<ul>
<li>Commits and pull requests are now built on travis to check that the library compiles, and to generate the documentation.</li>
<li>General changes and improvements to overall code quality.</li>
<li>Added the missing struct and functions for Y2R.</li>
<li>Added srvGetServiceHandleDirect for bypassing the handle override mechanism.</li>
<li>Usage of the CSND service in new applications is not recommended, however it is not deprecated. The usage of NDSP instead is advised.</li>
<li>Usage of the HB service in new applications is not recommended due to its necessary removal in hax 2.x, however it is not deprecated.</li>
<li>Several bugs affecting APT were fixed.</li>
<li>Several bugs affecting C++ were fixed.</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md31"></a>
Version 0 through 0.6.0</h1>
<p>No changelog available. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
